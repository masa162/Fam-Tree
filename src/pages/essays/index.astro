---
import BaseLayout from "../../layouts/BaseLayout.astro";
import HorizontalCard from "../../components/HorizontalCard.astro";
import { getCollection } from "astro:content";

// ã™ã¹ã¦ã®è¨˜äº‹ã‚’å–å¾—ã—ã€ã‚«ãƒ†ã‚´ãƒªãŒ 'essay' ã®ã‚‚ã®ã ã‘ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
const allArticles = await getCollection("articles");
const essayArticles = allArticles
  .filter(article => article.data.category === 'essay')
  .sort((a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf());
---

<BaseLayout
  title="ã‚¨ãƒƒã‚»ã‚¤ä¸€è¦§"
  description="å®¶æ—ã®æ€ã„ã‚„è€ƒãˆã‚’ç¶´ã£ãŸã‚¨ãƒƒã‚»ã‚¤é›†ã§ã™ã€‚"
  sideBarActiveItemID="essays"
>
  <section class="max-w-4xl mx-auto px-6 py-12">
    <h1 class="text-4xl font-bold mb-6">ğŸ“ ã‚¨ãƒƒã‚»ã‚¤ä¸€è¦§</h1>

    {essayArticles.length === 0 ? (
      <p class="text-gray-500">ã‚¨ãƒƒã‚»ã‚¤è¨˜äº‹ãŒã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    ) : (
      <div class="space-y-6">
        {essayArticles.map(({ slug, data }) => (
          <div class="article-card" data-slug={slug}>
            <HorizontalCard
              title={data.title}
              desc={data.description}
              img={data.heroImage ?? data.image} 
              url={`/articles/${slug}/`}
              badge={data.badge ?? "ã‚¨ãƒƒã‚»ã‚¤"}
              tags={data.tags}
              pubDate={data.pubDate}
              author={data.author}
            />
          </div>
        ))}
      </div>
    )}
  </section>
</BaseLayout>
